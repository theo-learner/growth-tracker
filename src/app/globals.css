@import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css");

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   AI 성장 트래커 — 글로벌 스타일 v3
   프리미엄 부모 친화적 디자인 시스템
   Soft Green + Warm Beige 기조
   ============================================ */

/* ─── CSS 변수 ─── */
:root {
  --background: #F5F0E8;
  --foreground: #2C2C2C;

  /* 그라데이션 프리셋 */
  --gradient-warm-bg: linear-gradient(180deg, #FAF7F2 0%, #F5F0E8 50%, #FAF7F2 100%);
  --gradient-green: linear-gradient(135deg, #5CB87A 0%, #4CAF6E 100%);
  --gradient-green-soft: linear-gradient(135deg, #DCFCE7 0%, #F0FDF4 100%);
  --gradient-card: linear-gradient(180deg, #FFFFFF 0%, #FDFCF9 100%);
  --gradient-insight: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 40%, #F0FDF4 100%);
  --gradient-warm-highlight: linear-gradient(135deg, #FFFDF5 0%, #FFF8E0 100%);

  /* 6개 발달 영역 색상 변수 (차트/JS에서 참조용) */
  --color-language: #5B9BD5;
  --color-visuospatial: #9B72CF;
  --color-memory: #E8935A;
  --color-speed: #E07788;
  --color-logic: #4BBFA0;
  --color-motor: #D4A520;
}

/* ─── 기본 스타일 ─── */
body {
  font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  background: var(--gradient-warm-bg);
  background-attachment: fixed;
  color: var(--foreground);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.6;
  letter-spacing: -0.01em;
}

/* 모바일 터치 최적화 */
* {
  -webkit-tap-highlight-color: transparent;
}
input, textarea, button, select {
  font-family: inherit;
}

/* ─── 컴포넌트 레이어 ─── */
@layer components {

  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     카드 시스템 — 따뜻한 그라데이션 + 입체 그림자
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */

  /* 기본 카드 — 미세 그라데이션 + 멀티레이어 그림자 */
  .card {
    @apply relative rounded-cardLg p-5
           border border-white/70
           shadow-card
           transition-all duration-300;
    background: var(--gradient-card);
  }
  .card:hover {
    @apply shadow-card-hover -translate-y-0.5;
  }
  .card:active {
    @apply shadow-card-active translate-y-0;
  }

  /* 인사이트 카드 — 그린 틴트 + 그린 그림자 */
  .card-insight {
    @apply relative rounded-cardLg p-5
           border border-soft-green-100/50
           shadow-card-green
           transition-all duration-300;
    background: var(--gradient-insight);
  }

  /* 하이라이트 카드 — 옐로우/골드 틴트 */
  .card-highlight {
    @apply rounded-card px-4 py-3.5
           border border-sunny-yellow-light/60;
    background: var(--gradient-warm-highlight);
  }

  /* 차트 카드 — 인셋 그림자로 "들어간" 느낌 */
  .chart-card {
    @apply rounded-cardLg p-5 shadow-card;
    background: var(--gradient-card);
  }
  .chart-card .chart-area {
    @apply rounded-card p-3 mt-2;
    background: linear-gradient(180deg, #FAFDF9 0%, #F5F8F4 100%);
    box-shadow: inset 0 1px 4px rgba(0,0,0,0.03);
  }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     버튼 시스템
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */

  /* Primary 버튼 — 그린 그라데이션 + 글로우 */
  .btn-primary {
    @apply relative w-full h-12 rounded-button
           font-semibold text-base text-white
           shadow-btn-green
           active:scale-[0.97] active:shadow-card-active
           transition-all duration-200
           overflow-hidden;
    background: var(--gradient-green);
  }
  .btn-primary:hover {
    @apply shadow-btn-green-hover;
    filter: brightness(1.04);
  }
  .btn-primary:disabled {
    @apply opacity-40 cursor-not-allowed shadow-none;
    filter: grayscale(0.3);
  }
  /* 글래스 하이라이트 오버레이 */
  .btn-primary::after {
    content: '';
    @apply absolute inset-0 rounded-button pointer-events-none;
    background: linear-gradient(180deg, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0.03) 50%, transparent 100%);
  }

  /* Secondary 버튼 */
  .btn-secondary {
    @apply w-full h-12 rounded-button
           font-semibold text-base
           bg-white text-mid-gray
           border border-light-gray
           shadow-card-active
           hover:border-soft-green/40 hover:text-soft-green-600
           hover:shadow-card
           active:scale-[0.97]
           transition-all duration-200;
  }

  /* Ghost 버튼 */
  .btn-ghost {
    @apply px-4 py-2 rounded-button
           font-medium text-sm text-calm-blue
           hover:bg-calm-blue-light/30
           active:scale-[0.97]
           transition-all duration-200;
  }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     선택 칩 — 단일/다중 선택
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
  .chip {
    @apply py-3 px-4 rounded-card
           text-center font-medium text-sm
           bg-white text-dark-gray
           border border-light-gray
           shadow-card-active
           hover:border-soft-green/40 hover:shadow-card
           active:scale-[0.96]
           transition-all duration-200;
  }
  .chip-selected {
    @apply text-white border-transparent
           shadow-btn-green;
    background: var(--gradient-green);
  }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     인풋 필드
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
  .input-field {
    @apply w-full h-12 px-4 rounded-button
           border border-light-gray bg-white
           text-base text-dark-gray
           placeholder:text-mid-gray/40
           focus:outline-none focus:border-soft-green
           focus:shadow-input-focus
           transition-all duration-200;
  }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     뱃지 시스템
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
  .badge {
    @apply inline-flex items-center gap-1
           px-3 py-1 rounded-badge
           text-xs font-semibold
           shadow-badge;
  }
  .badge-green {
    @apply bg-soft-green-50 text-soft-green-700
           border border-soft-green-100;
  }
  .badge-yellow {
    @apply text-sunny-yellow-dark border;
    background: #FFFDF5;
    border-color: #FFF0B8;
  }
  .badge-blue {
    @apply bg-calm-blue-light text-calm-blue-dark
           border border-calm-blue/20;
  }

  /* 발달 영역별 뱃지 */
  .badge-domain-language    { @apply bg-domain-language-bg text-domain-language border border-domain-language-light; }
  .badge-domain-visuospatial { @apply bg-domain-visuospatial-bg text-domain-visuospatial border border-domain-visuospatial-light; }
  .badge-domain-memory      { @apply bg-domain-memory-bg text-domain-memory border border-domain-memory-light; }
  .badge-domain-speed       { @apply bg-domain-speed-bg text-domain-speed border border-domain-speed-light; }
  .badge-domain-logic       { @apply bg-domain-logic-bg text-domain-logic border border-domain-logic-light; }
  .badge-domain-motor       { @apply bg-domain-motor-bg text-domain-motor border border-domain-motor-light; }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     텍스트 스타일
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
  .section-title {
    @apply text-base font-bold text-dark-gray mb-3;
    letter-spacing: -0.02em;
  }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     프로그레스 바 — 매끄러운 그라데이션
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
  .progress-bar {
    @apply h-2 rounded-full overflow-hidden;
    background: linear-gradient(90deg, #F0EDE6 0%, #E8E4DE 100%);
  }
  .progress-bar > div {
    @apply h-full rounded-full;
    background: var(--gradient-green);
    transition: width 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     온보딩 프로그레스 — 스텝 인디케이터
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */

  /* 온보딩 프로그레스 바 (상단 연결선) */
  .onboarding-progress-track {
    @apply h-1 rounded-full overflow-hidden;
    background: linear-gradient(90deg, #E8E4DE 0%, #F0EDE6 100%);
  }
  .onboarding-progress-fill {
    @apply h-full rounded-full;
    background: var(--gradient-green);
    transition: width 0.7s cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* 스텝 도트 — 기본 */
  .step-dot {
    @apply w-10 h-10 rounded-full
           flex items-center justify-center
           font-bold text-sm
           transition-all duration-300;
  }
  /* 스텝 도트 — 활성 상태 */
  .step-dot-active {
    @apply text-white shadow-step-active;
    background: var(--gradient-green);
    transform: scale(1.08);
  }
  /* 스텝 도트 — 완료 상태 */
  .step-dot-done {
    @apply bg-soft-green text-white shadow-btn-green;
  }
  /* 스텝 도트 — 대기 상태 */
  .step-dot-pending {
    @apply bg-white text-mid-gray border-2 border-light-gray;
  }
  /* 스텝 라벨 */
  .step-label {
    @apply text-[10px] mt-2 font-semibold tracking-tight
           transition-all duration-300;
  }
  .step-label-active {
    @apply text-soft-green-600;
  }
  .step-label-done {
    @apply text-soft-green;
  }
  .step-label-pending {
    @apply text-mid-gray;
  }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     탭 바 — 유리 효과 + 부드러운 네비게이션
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
  .tab-item {
    @apply flex flex-col items-center gap-0.5
           min-w-[48px] py-1
           transition-all duration-200;
  }
  .tab-item-active {
    @apply text-soft-green;
  }
  .tab-item-inactive {
    @apply text-mid-gray hover:text-soft-green/60;
  }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     기록 버튼 (홈 그리드) — 터치 피드백 강화
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
  .record-btn {
    @apply p-3 flex flex-col items-center justify-center gap-1.5
           rounded-cardLg
           border border-white/60
           shadow-card
           transition-all duration-200;
    background: var(--gradient-card);
    min-height: 76px;
  }
  .record-btn:hover {
    @apply shadow-card-hover -translate-y-0.5;
  }
  .record-btn:active {
    @apply shadow-card-active translate-y-0 scale-[0.94];
    transition-duration: 100ms;
  }
  /* 아이콘 — 살짝 바운스 효과 */
  .record-btn .record-btn-icon {
    @apply transition-transform duration-200;
  }
  .record-btn:active .record-btn-icon {
    transform: scale(0.9);
  }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     바텀시트 — 부드러운 올라오기
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
  .bottom-sheet {
    @apply fixed bottom-0 left-1/2 -translate-x-1/2
           w-full max-w-[430px]
           bg-white rounded-t-[24px]
           z-50 animate-slide-up;
    box-shadow: 0 -8px 40px rgba(0,0,0,0.08), 0 -2px 12px rgba(0,0,0,0.04);
  }
  .bottom-sheet-handle {
    @apply flex justify-center pt-3 pb-2;
  }
  .bottom-sheet-handle::after {
    content: '';
    @apply w-10 h-1 rounded-full;
    background: linear-gradient(90deg, #E0D5C1, #E8E4DE, #E0D5C1);
  }
  .bottom-sheet-backdrop {
    @apply fixed inset-0 z-40;
    background: rgba(0,0,0,0.25);
    backdrop-filter: blur(2px);
    -webkit-backdrop-filter: blur(2px);
  }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     리포트 카드 — 하이라이트 강조
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */

  /* 리포트 내 도메인 행 — 호버시 하이라이트 */
  .report-domain-row {
    @apply flex items-center justify-between
           py-3.5 px-1
           border-b border-light-gray/40 last:border-0
           transition-colors duration-200;
  }
  .report-domain-row:hover {
    @apply bg-warm-beige-50/50 rounded-button;
  }

  /* 트렌드 인디케이터 — 작은 아이콘 원 */
  .trend-indicator {
    @apply inline-flex items-center justify-center
           w-7 h-7 rounded-full
           text-xs font-bold
           transition-all duration-200;
  }
  .trend-up {
    @apply bg-soft-green-50 text-soft-green-600;
  }
  .trend-stable {
    @apply bg-calm-blue-light text-calm-blue-dark;
  }
  .trend-down {
    @apply bg-soft-coral-light text-soft-coral-dark;
  }

  /* 리포트 하이라이트 아이템 — 번호 뱃지 */
  .highlight-item {
    @apply relative pl-4;
  }
  .highlight-item::before {
    content: '';
    @apply absolute left-0 top-2 w-1.5 h-1.5
           rounded-full bg-sunny-yellow;
  }


  /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     정보 배너 / 안내 카드
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
  .info-banner {
    @apply rounded-card px-4 py-3.5
           border border-calm-blue/10;
    background: linear-gradient(135deg, #EDF5FC 0%, #F3F9FE 100%);
  }
  .info-banner-green {
    @apply rounded-card px-4 py-3.5
           border border-soft-green-100/40;
    background: linear-gradient(135deg, #F0FDF4 0%, #F5FFF8 100%);
  }
}


/* ─── 유틸리티 레이어 ─── */
@layer utilities {
  .bg-gradient-green {
    background: var(--gradient-green);
  }
  .bg-gradient-green-soft {
    background: var(--gradient-green-soft);
  }
  .bg-gradient-warm-bg {
    background: var(--gradient-warm-bg);
  }

  /* 텍스트 그라데이션 */
  .text-gradient-green {
    background: var(--gradient-green);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* 따뜻한 구분선 — 그라데이션 페이드 */
  .divider-warm {
    @apply h-px;
    background: linear-gradient(90deg, transparent 5%, #E0D5C1 50%, transparent 95%);
  }

  /* 안전 영역 하단 패딩 */
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* 시머 로딩 효과 */
  .shimmer {
    background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.5) 50%, transparent 100%);
    background-size: 200% 100%;
    animation: shimmer 2s infinite linear;
  }

  /* 글래스 모피즘 */
  .glass {
    @apply bg-white/80 backdrop-blur-xl border border-white/60;
  }
  .glass-strong {
    @apply bg-white/90 backdrop-blur-2xl border border-white/70;
  }
}


/* ─── 스크롤바 커스텀 ─── */
::-webkit-scrollbar {
  width: 3px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: #D4E8D6;
  border-radius: 100px;
}
::-webkit-scrollbar-thumb:hover {
  background: #BBF7D0;
}

/* 스크롤바 숨기기 유틸리티 */
.hide-scrollbar::-webkit-scrollbar {
  display: none;
}
.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}


/* ─── 선택 하이라이트 ─── */
::selection {
  background-color: #DCFCE7;
  color: #2D8A4A;
}


/* ─── 애니메이션 클래스 (레거시 호환) ─── */
.animate-fadeIn {
  animation: fadeInUp 0.4s ease-out forwards;
}
.animate-slideUp {
  animation: slideUp 0.35s cubic-bezier(0.16, 1, 0.3, 1);
}


/* ─── Recharts 차트 커스텀 — 프리미엄 스타일 ─── */
.recharts-polar-grid-concentric-polygon {
  stroke: #E0DDD6 !important;
  stroke-width: 0.7 !important;
}
.recharts-polar-angle-axis-tick-value {
  font-size: 11px !important;
  fill: #555555 !important;
  font-weight: 500 !important;
}
/* 차트 도트 — 부드러운 전환 */
.recharts-dot {
  transition: r 0.2s ease;
}
/* 에어리어 차트 — 부드러운 라인 */
.recharts-area-curve,
.recharts-line-curve {
  stroke-linecap: round;
  stroke-linejoin: round;
}
/* 카테시안 그리드 — 은은한 라인 */
.recharts-cartesian-grid-horizontal line {
  stroke: #E8E4DE !important;
  stroke-width: 0.7 !important;
}


/* ─── 포커스 접근성 — 키보드 포커스만 표시 ─── */
*:focus-visible {
  outline: 2px solid #5CB87A;
  outline-offset: 2px;
  border-radius: 4px;
}
*:focus:not(:focus-visible) {
  outline: none;
}
